name: smoke-reusable

on:
  pull_request:
    branches: [main]
  workflow_dispatch: {}

jobs:
  smoke-go:
    name: Smoke - Go reusable CI
    uses: ./.github/workflows/ci-go.yml
    with:
      go-version: "1.22.x"
      workdir: "examples/go-hello"
      run-gosec: false
      run-staticcheck: false

  smoke-docker:
    name: Smoke - Docker reusable build
    uses: ./.github/workflows/docker-publish-ghcr.yml
    with:
      image: ghcr.io/grrrrrrh/pipeline-kit-smoke
      context: "examples/docker"
      dockerfile: "examples/docker/Dockerfile"
      push: false
